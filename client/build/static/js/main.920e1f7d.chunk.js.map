{"version":3,"sources":["assets/alert-icon-1559-min.png","dialog/BootstrapDialog.js","firebase/firebase.js","context/AuthContext.js","dialog/ViewMarker.js","dialog/PostMarker.js","components/Markers.js","map/FloodMap.js","assets/video.mp4","components/Home.js","components/LogIn.js","components/SignUp.js","App.js","index.js"],"names":["BootstrapDialog","styled","Dialog","theme","padding","spacing","BootstrapDialogTitle","props","children","onClose","other","DialogTitle","sx","m","p","style","width","IconButton","onClick","position","right","top","color","palette","grey","auth","firebase","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","getAuth","signupFirebase","createUserWithEmailAndPassword","setUserFirebase","onAuthStateChanged","logInUserFirebase","signInWithEmailAndPassword","LogOut","signOut","db","getFirestore","AuthContext","React","createContext","AuthProvider","useState","currentUser","setCurrentUser","allMarkers","setAllMarkers","loading","setLoading","useEffect","user","q","query","collection","where","uid","getDocs","then","querySnapshot","forEach","doc","email","data","firstName","lastName","userid","id","catch","err","console","log","axios","get","res","severityArray","map","date","created_on","substring","split","finalDateFormatted","longitude","parseFloat","latitude","severity","description","user_id","value","signup","password","login","logout","Provider","Transition","forwardRef","ref","Slide","direction","ViewMarker","useContext","handleCloseViewMarker","openViewMarker","information","today","Date","toLocaleDateString","slice","open","TransitionComponent","Typography","DialogContent","dividers","variant","component","className","Alert","elevation","PostMarker","marker","setMarker","openPostMarker","setOpenPostMarker","setOwnMarkers","successSave","setSuccess","errorSave","setError","handleClosePostMarker","handleMarkerChange","e","target","name","handleCloseSuccess","handleCloseError","TextField","label","multiline","rows","maxRows","onChange","helperText","RadioGroup","defaultValue","row","FormControlLabel","control","Radio","required","DialogActions","Stack","Button","type","indexOf","toString","post","markers","autoFocus","size","endIcon","Snackbar","autoHideDuration","Markers","setViewMarker","setInformation","filter","el","datum","index","src","alertmarker","handleOpenViewMarker","mapboxgl","workerClass","require","default","MAPBOX_TOKEN","FloodMap","zoom","viewport","setViewport","geocoderContainerRef","useRef","mapRef","handleViewportChange","useCallback","newViewport","history","useHistory","handleGeocoderViewportChange","transitionDuration","height","display","justifyContent","zIndex","AppBar","background","Toolbar","Grid","item","xs","Link","href","marginRight","textAlign","localStorage","clear","push","margin","mapStyle","onViewportChange","mapboxApiAccessToken","lngLat","asyncRender","minZoom","maxZoom","maxPitch","containerRef","bottom","positionOptions","enableHighAccuracy","trackUserLocation","VideoPlayer","CardMedia","Home","container","image","MainPage","autoPlay","loop","LogIn","openError","setOpenError","error","Container","maxWidth","CssBaseline","Box","marginTop","flexDirection","alignItems","Collapse","in","action","fontSize","mb","onSubmit","event","preventDefault","FormData","currentTarget","setItem","accessToken","errorMessage","code","findError","noValidate","mt","fullWidth","autoComplete","Checkbox","addDoc","sm","App","path","exact","SignUp","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.920e1f7d.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/alert-icon-1559-min.1211b20c.png\";","import * as React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Button from '@mui/material/Button';\r\nimport { styled } from '@mui/material/styles';\r\nimport Dialog from '@mui/material/Dialog';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\n\r\nimport IconButton from '@mui/material/IconButton';\r\nimport CloseIcon from '@mui/icons-material/Close';\r\nimport Typography from '@mui/material/Typography';\r\n\r\nconst BootstrapDialog = styled(Dialog)(({ theme }) => ({\r\n  '& .MuiDialogContent-root': {\r\n    padding: theme.spacing(2),\r\n \r\n  },\r\n  '& .MuiDialogActions-root': {\r\n    padding: theme.spacing(1),\r\n   \r\n  },\r\n}));\r\n\r\nexport const BootstrapDialogTitle = (props) => {\r\n  const { children, onClose, ...other } = props;\r\n\r\n  return (\r\n    <DialogTitle sx={{ m: 0, p: 2 }} {...other} style={{ width: '200px'}}>\r\n      {children}\r\n      {onClose ? (\r\n        <IconButton\r\n          aria-label=\"close\"\r\n          onClick={onClose}\r\n          sx={{\r\n            position: 'absolute',\r\n            right: 8,\r\n            top: 8,\r\n            color: (theme) => theme.palette.grey[500],\r\n          }}\r\n        >\r\n          <CloseIcon />\r\n        </IconButton>\r\n      ) : null}\r\n    </DialogTitle>\r\n  );\r\n};\r\n\r\nBootstrapDialogTitle.propTypes = {\r\n  children: PropTypes.node,\r\n  onClose: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default BootstrapDialog;\r\n","import firebase from 'firebase/compat/app';\r\nimport { \r\n  getAuth, \r\n  createUserWithEmailAndPassword, \r\n  onAuthStateChanged, \r\n  signInWithEmailAndPassword,\r\n  signOut } from \"firebase/auth\";\r\nimport { getFirestore } from \"firebase/firestore\"\r\n\r\nconst app = firebase.initializeApp({\r\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\r\n  authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\r\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\r\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\r\n  appId: process.env.REACT_APP_FIREBASE_APP_ID\r\n})\r\n\r\nexport const auth = getAuth();\r\nexport const signupFirebase = createUserWithEmailAndPassword;\r\nexport const setUserFirebase = onAuthStateChanged;\r\nexport const logInUserFirebase = signInWithEmailAndPassword;\r\nexport const LogOut = signOut;\r\nexport const db = getFirestore(); \r\nexport default app;","import React, { useContext, useState, useEffect } from 'react';\r\nimport { \r\n    auth, \r\n    signupFirebase, \r\n    setUserFirebase, \r\n    logInUserFirebase, \r\n    db,\r\n    LogOut } from '../firebase/firebase'\r\n\r\nimport { doc, getDoc } from \"firebase/firestore\";\r\nimport { collection, query, where, getDocs } from \"firebase/firestore\";\r\nimport axios from \"axios\";\r\n\r\nexport const AuthContext = React.createContext();\r\n\r\nexport default function AuthProvider({ children }) {\r\n    const [currentUser, setCurrentUser] = useState(null);\r\n    const [allMarkers, setAllMarkers] = useState([]);\r\n\r\n    const [loading, setLoading] = useState(true);\r\n\r\n\r\n    const signup = (email, password, firstName, lastName) => {\r\n        // It returns a Promise. Errors are being handled in the\r\n        // SignUp component\r\n        // Set User in database collection users and bring here\r\n        return signupFirebase(auth, email, password)\r\n    }\r\n\r\n    const login = (email, password) => {\r\n        return logInUserFirebase(auth, email, password);\r\n    }\r\n\r\n    const logout = () => {\r\n        setCurrentUser(null);\r\n        return LogOut(auth);\r\n    }\r\n\r\n    useEffect(() => {\r\n        const unsubscribe = setUserFirebase(auth, user => {\r\n            \r\n           if(user) {\r\n            const q = query(collection(db, \"users\"), where(\"uid\", \"==\", user.uid));\r\n\r\n            getDocs(q)\r\n                .then(querySnapshot => {\r\n                    querySnapshot.forEach((doc) => {\r\n\r\n                        setCurrentUser({\r\n                            email: doc.data().email, \r\n                            firstName: doc.data().firstName, \r\n                            lastName: doc.data().firstName,\r\n                            uid: doc.data().uid,\r\n                            userid: doc.id\r\n                        });\r\n\r\n                        // doc.data() is never undefined for query doc snapshots\r\n                       /* console.log(doc.id, \" => \", doc.data());\r\n                        console.log(doc._key.path.segments[6]);\r\n                        console.log(doc);*/\r\n                    });\r\n                })\r\n                .catch(err => {\r\n                    console.log(err)\r\n                });\r\n\r\n                 }\r\n\r\n\r\n                // Getting all markers\r\n              /*  const q1 = collection(db, \"users\");\r\n\r\n                getDocs(q1)\r\n                .then(querySnapshot => {\r\n                    querySnapshot.forEach((doc) => {\r\n                        setAllMarkers(allMarkers => allMarkers.concat(doc.data().markers));\r\n                    });\r\n                })\r\n                .catch(err => {\r\n                    console.log(err)\r\n                });*/\r\n\r\n                axios.get(\"http://localhost:4000/api/view_all_markers/\")\r\n                .then((res) => {\r\n  \r\n                 let severityArray = ['none', 'low', 'moderate', 'major', 'critical'];  \r\n                  \r\n                  setAllMarkers(res.data.map(data => {\r\n\r\n                    let date = data.created_on.substring(0, 10).split('-')\r\n                 \r\n                    let finalDateFormatted = date[2]+'/'+date[1]+'/'+date[0];\r\n\r\n                      return {\r\n                          longitude: parseFloat(data.longitude),\r\n                          latitude: parseFloat(data.latitude),\r\n                          severity: severityArray[data.severity],\r\n                          description: data.description,\r\n                          user_id: data.user_id,\r\n                         created_on: finalDateFormatted\r\n                      }\r\n                  }));\r\n\r\n                \r\n                  \r\n  \r\n                  //console.log(\"Employee Firstname:\", res.data[0].first_name);\r\n  \r\n                })\r\n                .catch((err) => {\r\n                  console.log(err);\r\n                });\r\n\r\n\r\n           \r\n\r\n            setLoading(false);\r\n         \r\n        })\r\n    \r\n\r\n        return unsubscribe;\r\n    \r\n    }, []);\r\n\r\n\r\n    const value = {\r\n        currentUser,\r\n        allMarkers,\r\n        setAllMarkers,\r\n        signup,\r\n        login,\r\n        logout\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <AuthContext.Provider value={value}>\r\n                {!loading && children}\r\n            </AuthContext.Provider>\r\n        </>\r\n    )\r\n}","import React, { useState, useRef, useCallback, useMemo, useEffect } from \"react\";\r\nimport BootstrapDialog, { BootstrapDialogTitle } from './BootstrapDialog';\r\nimport Typography from '@mui/material/Typography';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport DialogActions from '@mui/material/DialogActions';\r\nimport Slide from '@mui/material/Slide';\r\nimport AuthProvider, { AuthContext } from '../context/AuthContext';\r\n\r\nconst Transition = React.forwardRef((props, ref) => {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst ViewMarker = (props) => {\r\n\r\n  const { currentUser } = React.useContext(AuthContext);\r\n  const { handleCloseViewMarker, openViewMarker, information } = props\r\n\r\n  let today = new Date().toLocaleDateString().slice(0, 10)\r\n\r\n  return (\r\n    <BootstrapDialog\r\n      onClose={handleCloseViewMarker}\r\n      aria-labelledby=\"customized-dialog-title\"\r\n      open={openViewMarker}\r\n      TransitionComponent={Transition}\r\n\r\n    >\r\n      <BootstrapDialogTitle id=\"customized-dialog-title\" onClose={handleCloseViewMarker}>\r\n        <Typography id=\"transition-modal-title\" >\r\n          Marker Details\r\n        </Typography>\r\n      </BootstrapDialogTitle>\r\n      <DialogContent dividers >\r\n        <br />\r\n        <br />\r\n        <Typography id=\"transition-modal-title\" variant=\"h6\" component=\"h6\">\r\n          Description:\r\n        </Typography>\r\n        <Typography id=\"transition-modal-title\" variant=\"p\" component=\"p\">\r\n          {information.description ? (\r\n            <>\r\n              {` ${information.description}`}\r\n            </>\r\n          ) : (<>\r\n            No description provided for this event.\r\n          </>\r\n          )\r\n          }\r\n        </Typography>\r\n        <br />\r\n        <Typography id=\"transition-modal-title\" variant=\"h6\" component=\"h6\">\r\n          Created On:\r\n        </Typography>\r\n        <Typography id=\"transition-modal-title\" variant=\"body2\" >\r\n\r\n          {information.created_on ? (\r\n            <>\r\n              {` ${information.created_on}`}\r\n            </>\r\n          ) : (\r\n            <>\r\n              {`${today}`}\r\n            </>\r\n          )\r\n          }\r\n        </Typography>\r\n        <br />\r\n\r\n        <Typography id=\"transition-modal-title\" variant=\"h6\" component=\"h6\">\r\n          Level of Severity:\r\n        </Typography>\r\n        <Typography className={\"typography\" + information.severity} id=\"transition-modal-title\" variant=\"h6\" component=\"h6\">\r\n\r\n          {information && (\r\n            <>\r\n              {` ${information.severity}`}\r\n            </>\r\n          )\r\n          }\r\n        </Typography>\r\n          <br/>\r\n        <Typography id=\"transition-modal-title\" variant=\"caption\" >\r\n          {currentUser && information.user_id == currentUser.uid ? (\r\n            <>\r\n            This marker was posted by you\r\n            </>\r\n          ) : (\r\n            <>\r\n            This marker was posted by one of the members of our community\r\n            </>\r\n          )\r\n\r\n            }\r\n        </Typography>\r\n\r\n      </DialogContent>\r\n    </BootstrapDialog>\r\n\r\n\r\n  )\r\n}\r\n\r\nexport default ViewMarker;","import React, { useState, useRef, useCallback, useMemo, useEffect } from \"react\";\r\nimport BootstrapDialog, { BootstrapDialogTitle } from './BootstrapDialog';\r\nimport Typography from '@mui/material/Typography';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport DialogActions from '@mui/material/DialogActions';\r\nimport Slide from '@mui/material/Slide';\r\nimport SendIcon from '@mui/icons-material/Send';\r\nimport CancelIcon from '@mui/icons-material/Cancel';\r\nimport TextField from '@mui/material/TextField';\r\nimport Radio from '@mui/material/Radio';\r\nimport RadioGroup from '@mui/material/RadioGroup';\r\nimport FormControlLabel from '@mui/material/FormControlLabel';\r\nimport Stack from '@mui/material/Stack';\r\nimport Button from '@mui/material/Button';\r\n// Success/Error Alerts\r\nimport Snackbar from '@mui/material/Snackbar';\r\nimport MuiAlert from '@mui/material/Alert';\r\nimport { AuthContext } from '../context/AuthContext';\r\n\r\nimport { db } from '../firebase/firebase'\r\nimport { collection, addDoc } from \"firebase/firestore\";\r\nimport { doc, updateDoc, arrayUnion } from \"firebase/firestore\";\r\nimport axios from \"axios\";\r\n\r\nconst Transition = React.forwardRef((props, ref) => {\r\n    return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst Alert = React.forwardRef(function Alert(props, ref) {\r\n    return <MuiAlert elevation={6} ref={ref} variant=\"filled\" {...props} />;\r\n});\r\n\r\n\r\nconst PostMarker = (props) => {\r\n\r\n    const { currentUser } = React.useContext(AuthContext);\r\n    const { marker, setMarker, setAllMarkers, openPostMarker, setOpenPostMarker, setOwnMarkers } = props;\r\n\r\n    // Success/Error\r\n    const [successSave, setSuccess] = useState(false);\r\n    const [errorSave, setError] = useState();\r\n\r\n    const handleClosePostMarker = () => {\r\n        setOpenPostMarker(false);\r\n    }\r\n\r\n    const handleMarkerChange = (e) => {\r\n        setMarker({\r\n            ...marker,\r\n            [e.target.name]: e.target.value,\r\n        });\r\n    };\r\n\r\n    const handleSave = () => {\r\n\r\n        if (currentUser) {\r\n\r\n            if (marker.severity) {\r\n\r\n\r\n                let severityArray = ['none', 'low', 'moderate', 'major', 'critical'];   \r\n\r\n               // console.log(severityArray.indexOf(marker.severity.toString()))\r\n\r\n                const data = {\r\n                    latitude: marker.latitude,\r\n                    longitude: marker.longitude,\r\n                    user_id: currentUser.uid,\r\n                    description: marker.description ? marker.description : \"\",\r\n                    severity: severityArray.indexOf(marker.severity.toString())\r\n                    \r\n                }\r\n\r\n\r\n               \r\n\r\n                axios.post(\"http://localhost:4000/api/create_point\", data)\r\n                .then((res) => {\r\n                    console.log(res);\r\n                    console.log(marker);\r\n\r\n                    setOwnMarkers(markers => [...markers, marker])\r\n                    setAllMarkers(markers => [...markers, marker]);\r\n                    setOpenPostMarker(false);\r\n                    setSuccess(true);\r\n                })\r\n                .catch(err => {\r\n                    console.log(err);\r\n                })\r\n\r\n                // Update markers array in firestore\r\n             /*  const markerRef = doc(db, 'users', currentUser.userid);\r\n\r\n                updateDoc(markerRef,\r\n                    {\r\n                        markers: arrayUnion(data)\r\n                    }\r\n                ).then(res => {\r\n                    setOwnMarkers(markers => [...markers, marker])\r\n                   // setMarkers(markers => [...markers, marker]); // success\r\n\r\n                   setAllMarkers(markers => markers.concat(marker));\r\n\r\n                    setOpenPostMarker(false);\r\n                    setSuccess(true);\r\n                })\r\n                    .catch(err => {\r\n                        console.log(err)\r\n                    })*/\r\n\r\n\r\n\r\n\r\n                // axios.post('url', data).\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n            } else {\r\n                // error\r\n                setError(true);\r\n            }\r\n        } else {\r\n            console.log(\"No account\")\r\n        }\r\n    }\r\n\r\n\r\n    const handleCloseSuccess = () => {\r\n        setSuccess(false);\r\n    }\r\n\r\n    const handleCloseError = () => {\r\n        setError(false);\r\n    }\r\n\r\n\r\n    return (<>\r\n        <BootstrapDialog\r\n            onClose={handleClosePostMarker}\r\n            aria-labelledby=\"customized-dialog-title\"\r\n            open={openPostMarker}\r\n            TransitionComponent={Transition}\r\n        >\r\n\r\n            <BootstrapDialogTitle id=\"customized-dialog-title\" onClose={handleClosePostMarker}>\r\n                <Typography id=\"transition-modal-title\"  >\r\n                    Thank you for using our product!\r\n                </Typography>\r\n            </BootstrapDialogTitle>\r\n            <DialogContent dividers>\r\n                <TextField\r\n                    id=\"outlined-helperText\"\r\n                    label=\"Description\"\r\n                    multiline\r\n                    rows={4}\r\n                    maxRows={6}\r\n                    name=\"description\"\r\n                    onChange={handleMarkerChange}\r\n                    style={{ width: '100%' }}\r\n                    helperText=\"Please describe any details that could be important about this Flood\"\r\n                />\r\n                <br />\r\n                <br />\r\n\r\n                <Typography id=\"transition-modal-title\" variant=\"h6\" component=\"h6\">\r\n                    Please describe the level of severity of this Flood\r\n                </Typography>\r\n\r\n                <RadioGroup\r\n                    aria-label=\"gender\"\r\n                    defaultValue=\"female\"\r\n                    id=\"severity\"\r\n                    name=\"severity\"\r\n                    row\r\n                    onChange={handleMarkerChange}\r\n\r\n                >\r\n                    <FormControlLabel value=\"none\" control={\r\n                        <Radio\r\n                            required={true}\r\n                            sx={{\r\n                                color: '#353932',\r\n                                '&.Mui-checked': {\r\n                                    color: '#353932',\r\n                                },\r\n                            }}\r\n                        />} label=\"None\" />\r\n                    <FormControlLabel value=\"low\" control={\r\n                        <Radio\r\n                            required={true}\r\n                            sx={{\r\n                                color: '#353932',\r\n                                '&.Mui-checked': {\r\n                                    color: '#0aa14f',\r\n                                },\r\n                            }}\r\n                        />} label=\"Low\" />\r\n                    <FormControlLabel value=\"moderate\" control={\r\n                        <Radio\r\n                            required={true}\r\n                            sx={{\r\n                                color: '#353932',\r\n                                '&.Mui-checked': {\r\n                                    color: '#1388d7',\r\n                                },\r\n                            }}\r\n                        />} label=\"Moderate\" />\r\n                    <FormControlLabel value=\"major\" control={\r\n                        <Radio\r\n                            required={true}\r\n                            sx={{\r\n                                color: '#353932',\r\n                                '&.Mui-checked': {\r\n                                    color: '#efb90f',\r\n                                },\r\n                            }}\r\n                        />} label=\"Major\" />\r\n                    <FormControlLabel value=\"critical\" control={\r\n                        <Radio\r\n                            required={true}\r\n                            sx={{\r\n                                color: '#353932',\r\n                                '&.Mui-checked': {\r\n                                    color: '#e50000',\r\n                                },\r\n                            }} />} label=\"Critical\"\r\n\r\n                    />\r\n                </RadioGroup>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Stack spacing={2} direction=\"row\">\r\n                    <Button type=\"submit\" onClick={handleSave} autoFocus variant=\"contained\" color=\"primary\" size=\"large\" endIcon={<SendIcon />}>\r\n                        POST\r\n                    </Button>\r\n                    <Button onClick={handleClosePostMarker} variant=\"outlined\" color=\"error\" size=\"large\" endIcon={<CancelIcon />}>\r\n                        CANCEL\r\n                    </Button>\r\n                </Stack>\r\n            </DialogActions>\r\n\r\n        </BootstrapDialog>\r\n\r\n\r\n        <Snackbar open={successSave} autoHideDuration={8000} onClose={handleCloseSuccess}>\r\n            <Alert onClose={handleCloseSuccess} severity=\"success\" sx={{ width: '100%' }}>\r\n                You have posted a new marker! Thank you for contributing to the safety of our community!\r\n            </Alert>\r\n        </Snackbar>\r\n        <Snackbar open={errorSave} autoHideDuration={8000} onClose={handleCloseError}>\r\n            <Alert onClose={handleCloseError} severity=\"error\" sx={{ width: '100%' }}>\r\n                You need to verify your form! The level of severity is required. Thank you for contributing to the safety of our community!\r\n            </Alert>\r\n        </Snackbar>\r\n\r\n\r\n\r\n    </>\r\n    )\r\n}\r\n\r\nexport default PostMarker;","import React, { useState, useRef, useCallback, useMemo, useEffect } from \"react\";\r\n\r\nimport { Marker } from \"react-map-gl\";\r\nimport alertmarker from '../assets/alert-icon-1559-min.png';\r\n\r\nimport ViewMarker from '../dialog/ViewMarker';\r\nimport PostMarker from '../dialog/PostMarker';\r\nimport AuthProvider, { AuthContext } from '../context/AuthContext';\r\n\r\n\r\nconst Markers = (props) => {\r\n\r\n  const { currentUser, allMarkers, setAllMarkers } = React.useContext(AuthContext);\r\n\r\n  const { setMarker, marker, openPostMarker, setOpenPostMarker } = props;\r\n\r\n  //Place Markers\r\n\r\n\r\n  const [markers, setMarkers] = useState([]); // Give all markers\r\n\r\n  const [ownMarkers, setOwnMarkers] = useState([]); // Give own markers\r\n\r\n  const [openViewMarker, setViewMarker] = useState(false);\r\n  const [information, setInformation] = useState({});\r\n\r\n  const handleOpenViewMarker = (datum) => {\r\n    setViewMarker(true);\r\n    setInformation(datum);\r\n\r\n    console.log('datum from markers', datum)\r\n    console.log('allMarkers from markers', allMarkers)\r\n\r\n \r\n  }\r\n\r\n  const handleCloseViewMarker = () => {\r\n    setViewMarker(false);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if(currentUser){\r\n\r\n     // allMarkers.filter()\r\n\r\n\r\n      setOwnMarkers(allMarkers.filter((el) => {\r\n        return el.user_id == currentUser.uid\r\n      }));\r\n      \r\n    }\r\n   \r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    //console.log(\"Component has updated\");\r\n}, [markers]);\r\n\r\n  return (\r\n    <>\r\n      <PostMarker\r\n        marker={marker}\r\n        setMarker={setMarker}\r\n        setAllMarkers={setAllMarkers}\r\n        setOwnMarkers={setOwnMarkers}\r\n        openPostMarker={openPostMarker}\r\n        setOpenPostMarker={setOpenPostMarker}\r\n      />\r\n\r\n      <ViewMarker\r\n        handleCloseViewMarker={handleCloseViewMarker}\r\n        openViewMarker={openViewMarker}\r\n        information={information} />\r\n\r\n      {allMarkers.map((datum, index) => (\r\n        <Marker key={index} longitude={datum.longitude} latitude={datum.latitude}>\r\n          <div className={\"marker-container \" + datum.severity} >\r\n            <img width=\"25px\" src={alertmarker} onClick={() => handleOpenViewMarker(datum)} />\r\n          </div>\r\n        </Marker>\r\n      ))}\r\n    </>\r\n  )\r\n\r\n}\r\n\r\nexport default Markers;","import \"mapbox-gl/dist/mapbox-gl.css\";\r\nimport '../react-map-gl-geocoder/dist/mapbox-gl-geocoder.css';\r\nimport React, { useState, useRef, useCallback, useEffect } from \"react\";\r\nimport MapGL, { GeolocateControl } from \"react-map-gl\";\r\nimport Geocoder from \"react-map-gl-geocoder\";\r\nimport Markers from '../components/Markers';\r\n\r\nimport AppBar from '@mui/material/AppBar';\r\nimport Toolbar from '@mui/material/Toolbar';\r\nimport Grid from '@mui/material/Grid';\r\nimport Link from '@mui/material/Link';\r\nimport Button from '@mui/material/Button';\r\nimport ExitToAppIcon from '@mui/icons-material/ExitToApp';\r\nimport AccountCircleIcon from '@mui/icons-material/AccountCircle';\r\n\r\n\r\nimport {\r\n  useHistory,\r\n} from 'react-router-dom';\r\n\r\n// Firebase Code\r\nimport { AuthContext } from '../context/AuthContext';\r\n\r\n// @ts-ignore\r\nimport mapboxgl from \"mapbox-gl\";\r\n// @ts-ignore\r\n// eslint-disable-next-line import/no-webpack-loader-syntax, import/no-unresolved\r\nmapboxgl.workerClass = require(\"worker-loader!mapbox-gl/dist/mapbox-gl-csp-worker\").default;\r\n\r\n\r\nconst MAPBOX_TOKEN =\r\n  \"pk.eyJ1IjoicGlvbmVlci1tZSIsImEiOiJja2Q0djI3eDExbDduMnhtdHdxY3BsNXZjIn0.Y6TcDT4HSICrjdzeQxRLoA\";\r\n\r\nconst FloodMap = () => {\r\n  const [viewport, setViewport] = useState({\r\n    latitude: 29.7589382,\r\n    longitude: -95.3676974,\r\n    zoom: 8\r\n  });\r\n  const [marker, setMarker] = useState({});\r\n  const [openPostMarker, setOpenPostMarker] = useState(false);\r\n\r\n  const geocoderContainerRef = useRef();\r\n  const mapRef = useRef();\r\n  const handleViewportChange = useCallback(\r\n    (newViewport) => setViewport(newViewport),\r\n    []\r\n  );\r\n  const { currentUser, logout } = React.useContext(AuthContext);\r\n  const history = useHistory();\r\n\r\n  // Locate User\r\n  const geolocateStyle = {\r\n    bottom: 20,\r\n    right: 20,\r\n    margin: 10\r\n  };\r\n  const positionOptions = { enableHighAccuracy: true };\r\n\r\n  // if you are happy with Geocoder default settings, you can just use handleViewportChange directly\r\n  const handleGeocoderViewportChange = useCallback(\r\n    (newViewport) => {\r\n      const geocoderDefaultOverrides = { transitionDuration: 1000 };\r\n\r\n      return handleViewportChange({\r\n        ...newViewport,\r\n        ...geocoderDefaultOverrides\r\n      });\r\n    },\r\n    [handleViewportChange]\r\n  );\r\n\r\n  // Handle Click on map\r\n  const handleClickOnMap = ({ lngLat: [longitude, latitude] }) => {\r\n\r\n    if (currentUser) {\r\n      setMarker({ longitude, latitude })\r\n      setOpenPostMarker(true);\r\n    } else {\r\n      console.log('No logged in user');\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n\r\n  }, [])\r\n\r\n  const handleLogOut = () => {\r\n    logout()\r\n      .then(res => {\r\n        localStorage.clear();\r\n        history.push('/')\r\n      })\r\n      .catch(err => {\r\n\r\n      });\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div style={{ height: \"100vh\", display: \"flex\", justifyContent: \"center\" }}>\r\n        <div\r\n          style={{ position: \"absolute\", top: '80px', width: \"90%\", zIndex: 1 }}\r\n        />\r\n\r\n\r\n        <AppBar\r\n\r\n          position=\"fixed\" style={{\r\n            background: \"rgba(25,118,210,1)\",\r\n            display: \"flex\",\r\n            width: \"100%\",\r\n          }}>\r\n\r\n          <Toolbar>\r\n            <Grid item xs={1}>\r\n              <Link href=\"/\" style={{ color: '#fff' }}>\r\n                NextFlood\r\n              </Link>\r\n            </Grid>\r\n            <Grid ref={geocoderContainerRef} item xs={8} justifyContent=\"flex-end\" style={{ marginRight: '20px' }}>\r\n\r\n            </Grid>\r\n            {console.log(currentUser)}\r\n            {currentUser ? (\r\n              <>\r\n                <Grid item xs={1} style={{ textAlign: 'end' }}>\r\n                  Hello {currentUser.firstName}!\r\n                </Grid>\r\n                <Grid item xs={1} style={{ textAlign: 'end' }}>\r\n                  <Button\r\n                    size=\"small\"\r\n                    color=\"inherit\"\r\n                    onClick={handleLogOut}\r\n                  >\r\n                    <ExitToAppIcon style={{ margin: '10px' }} />\r\n                    LOG OUT\r\n                  </Button>\r\n                </Grid>\r\n              </>\r\n\r\n            ) : (\r\n              <>\r\n                <Grid item xs={1} style={{ textAlign: 'end' }}>\r\n                  <Button\r\n                    size=\"small\"\r\n                    color=\"inherit\"\r\n                    href=\"/login\"\r\n                  >\r\n                    <AccountCircleIcon style={{ margin: '10px' }} />\r\n                    Login\r\n                  </Button>\r\n                </Grid>\r\n\r\n                <Grid item xs={1} style={{ textAlign: 'end' }}>\r\n                  <Button\r\n                    size=\"small\"\r\n                    color=\"inherit\"\r\n\r\n                    href=\"/signup\"\r\n                  >\r\n                    <ExitToAppIcon style={{ margin: '10px' }} />\r\n                    Sign Up\r\n                  </Button>\r\n                </Grid>\r\n              </>\r\n            )\r\n            }\r\n          </Toolbar>\r\n        </AppBar>\r\n\r\n\r\n\r\n        <MapGL\r\n          ref={mapRef}\r\n          {...viewport}\r\n          width=\"100%\"\r\n          height=\"100%\"\r\n          mapStyle=\"mapbox://styles/mapbox/streets-v11\"\r\n          onViewportChange={handleViewportChange}\r\n          mapboxApiAccessToken={MAPBOX_TOKEN}\r\n          onClick={handleClickOnMap}\r\n          asyncRender={true}\r\n          minZoom={8}\r\n          maxZoom={15}\r\n          maxPitch={65}>\r\n\r\n          {<Markers\r\n            marker={marker}\r\n            setMarker={setMarker}\r\n            openPostMarker={openPostMarker}\r\n            setOpenPostMarker={setOpenPostMarker} />}\r\n\r\n\r\n\r\n          <Geocoder\r\n            mapRef={mapRef}\r\n            containerRef={geocoderContainerRef}\r\n            onViewportChange={handleGeocoderViewportChange}\r\n            mapboxApiAccessToken={MAPBOX_TOKEN}\r\n            position=\"top-left\"\r\n          />\r\n\r\n\r\n          <GeolocateControl\r\n            style={geolocateStyle}\r\n            positionOptions={positionOptions}\r\n            trackUserLocation\r\n          />\r\n\r\n        </MapGL>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default FloodMap;","export default __webpack_public_path__ + \"static/media/video.cba0a188.mp4\";","import React, { useState, useRef, useCallback } from \"react\";\r\n\r\n\r\n// Main page\r\nimport CardMedia from '@mui/material/CardMedia';\r\nimport Grid from '@mui/material/Grid';\r\nimport { styled } from '@mui/material/styles';\r\nimport MainPage from '../assets/video.mp4';\r\nimport Typography from '@mui/material/Typography';\r\nimport Button from '@mui/material/Button';\r\n\r\n// Sign In\r\n\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link,\r\n  useHistory,\r\n} from 'react-router-dom';\r\n\r\n\r\n\r\nconst VideoPlayer = styled(CardMedia)`\r\n    position: absolute;\r\n    top: 0px;\r\n    filter: blur(2px);\r\n    filter: brightness(0.4);\r\n    zIndex: -1;\r\n   height: 100%;\r\n   width: 100%;\r\n   object-fit: fill;\r\n`;\r\n\r\nconst Home = () => {\r\n  const history = useHistory();\r\n\r\n  \r\n\r\n  const handleLogIn = () => {\r\n    history.push('/login');\r\n  }\r\n\r\n  const handleSignUp = () => {\r\n    history.push('/signup');\r\n  }\r\n\r\n  const handleMap = () => {\r\n    history.push('/map');\r\n  }\r\n\r\n  // This is ready to add more components\r\n  return (<>\r\n\r\n    <Grid container >\r\n\r\n      <Grid item xs={12}\r\n        style={{\r\n          position: 'relative',\r\n          display: 'flex',\r\n          height: '30rem'\r\n        }}\r\n      >\r\n        <Grid item xs={12} style={{ height: 'auto', height: '100%' }}>\r\n          <VideoPlayer\r\n            component=\"video\"\r\n            className='video'\r\n            image={MainPage}\r\n            autoPlay\r\n            loop\r\n          />\r\n        </Grid>\r\n\r\n\r\n        <Grid item xs={12}\r\n          style={{\r\n            position: 'absolute',\r\n            padding: '2rem 2rem 2rem 4rem',\r\n            bottom: '0px',\r\n            height: 'auto',\r\n          }}\r\n        >\r\n          <Typography id=\"transition-modal-title\" variant=\"h3\" component=\"h3\"\r\n            style={{\r\n              color: '#fff'\r\n            }}\r\n          >\r\n            NextFlood\r\n          </Typography>\r\n          <br />\r\n          <Typography id=\"transition-modal-title\" variant=\"h6\" component=\"h6\"\r\n            style={{\r\n              color: '#fff'\r\n            }}\r\n          >\r\n            Welcome to the place where you can make our communities a safer place after rainfall events\r\n          </Typography>\r\n          <br />\r\n          <Button onClick={handleLogIn} autoFocus variant=\"contained\" color=\"primary\" size=\"large\" >\r\n            GET STARTED LOG IN\r\n          </Button>\r\n          <br />\r\n          <br />\r\n          <Button onClick={handleSignUp} autoFocus variant=\"contained\" color=\"primary\" size=\"large\" >\r\n            SIGN UP\r\n          </Button>\r\n          <br />\r\n          <br />\r\n\r\n          <Button onClick={handleMap} autoFocus variant=\"contained\" color=\"primary\" size=\"large\" >\r\n            EXPLORE THE FLOOD MAP\r\n          </Button>\r\n\r\n        </Grid>\r\n      </Grid>\r\n    </Grid>\r\n\r\n\r\n\r\n\r\n    \r\n     \r\n    \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    {/*  <FloodMap /> */}\r\n\r\n  </>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n\r\n\r\n// TODO\r\n/**\r\n * 1. Don't let the user submit without the required info DONE\r\n * 2. Setup success/error messages DONE\r\n * 3. You can only edit you own posts\r\n * 3.5 Give each marker an id\r\n * 4. When you click on a post you can see the info stored in it on a popup DONE\r\n * 5. Button that will enable the posting feature\r\n * 6. Firebase authorization and authentication part\r\n * 7. Photos and camera modes (look into this) Amazon S3 maybe?\r\n * 7. Ability to filter data in the UI. All in the browser\r\n * 8. Navbar to go to user settings menu\r\n * 9. Divide the code into smaller component files to increase readability\r\n * 10. Work on efficiency/performance of the markers DONE\r\n * 11. \"Is this event still happening?\" question on the form\r\n *\r\n */","\r\nimport * as React from 'react';\r\nimport Avatar from '@mui/material/Avatar';\r\nimport Button from '@mui/material/Button';\r\nimport CssBaseline from '@mui/material/CssBaseline';\r\nimport TextField from '@mui/material/TextField';\r\nimport FormControlLabel from '@mui/material/FormControlLabel';\r\nimport Checkbox from '@mui/material/Checkbox';\r\nimport Link from '@mui/material/Link';\r\nimport Grid from '@mui/material/Grid';\r\nimport Box from '@mui/material/Box';\r\nimport LockOutlinedIcon from '@mui/icons-material/LockOutlined';\r\nimport Typography from '@mui/material/Typography';\r\nimport Container from '@mui/material/Container';\r\n\r\n// Firebase Code\r\nimport AuthProvider, { AuthContext } from '../context/AuthContext';\r\nimport {\r\n  useHistory,\r\n} from 'react-router-dom';\r\n\r\n// Success/Error Alerts\r\nimport Alert from '@mui/material/Alert';\r\nimport IconButton from '@mui/material/IconButton';\r\nimport Collapse from '@mui/material/Collapse';\r\nimport CloseIcon from '@mui/icons-material/Close';\r\n\r\nexport default function LogIn() {\r\n  const { login } = React.useContext(AuthContext);\r\n\r\n  const [openError, setOpenError] = React.useState(false);\r\n  const [error, setError] = React.useState(\"\");\r\n\r\n  const history = useHistory();\r\n\r\n  const findError = (err) => {\r\n    let errorMessage = \"\";\r\n  \r\n    switch (err.code) {\r\n      case \"auth/invalid-email\":\r\n        errorMessage = \"Please provide a valid email address\";\r\n        break;\r\n      case \"auth/internal-error\":\r\n        errorMessage = \"Please provide a password\";\r\n        break;\r\n      case \"auth/user-not-found\":\r\n        errorMessage = \"You don't have an account with us. Please sign up.\";\r\n        break;\r\n      case \"auth/wrong-password\":\r\n        errorMessage = \"Wrong password. Please try again.\";\r\n        break;\r\n      default:\r\n        errorMessage = \"An undefined error happened.\";\r\n    }\r\n    return errorMessage;\r\n  }\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    const data = new FormData(event.currentTarget);\r\n\r\n    login(data.get('email'), data.get('password'))\r\n      .then(user => {\r\n      \r\n        localStorage.setItem(\"token\", user.user.accessToken);\r\n        history.push('/map')\r\n        setOpenError(false)\r\n      }).catch(err => {\r\n        console.log(err);\r\n        setError(findError(err)); //Change later\r\n        setOpenError(true)\r\n      });\r\n\r\n   \r\n  };\r\n\r\n  return (\r\n\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n      <Box\r\n        sx={{\r\n          marginTop: 8,\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          alignItems: 'center',\r\n        }}\r\n      >\r\n        <Collapse in={openError}>\r\n          <Alert\r\n            action={\r\n              <IconButton\r\n                aria-label=\"close\"\r\n                color=\"inherit\"\r\n                size=\"small\"\r\n                onClick={() => {\r\n                  setOpenError(false);\r\n                }}\r\n              >\r\n                <CloseIcon fontSize=\"inherit\" />\r\n              </IconButton>\r\n            }\r\n            sx={{ mb: 2 }}\r\n            severity=\"error\"\r\n          >\r\n            {error}\r\n          </Alert>\r\n        </Collapse>\r\n\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Sign in\r\n        </Typography>\r\n        <Box component=\"form\" onSubmit={handleSubmit} noValidate sx={{ mt: 1 }}>\r\n          <TextField\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"email\"\r\n            label=\"Email Address\"\r\n            name=\"email\"\r\n            autoComplete=\"email\"\r\n            autoFocus\r\n          />\r\n          <TextField\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            name=\"password\"\r\n            label=\"Password\"\r\n            type=\"password\"\r\n            id=\"password\"\r\n            autoComplete=\"current-password\"\r\n          />\r\n          <FormControlLabel\r\n            control={<Checkbox value=\"remember\" color=\"primary\" />}\r\n            label=\"Remember me\"\r\n          />\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            sx={{ mt: 3, mb: 2 }}\r\n          >\r\n            Sign In\r\n          </Button>\r\n          <Grid container>\r\n            <Grid item xs>\r\n              <Link href=\"#\" variant=\"body2\">\r\n                Forgot password?\r\n              </Link>\r\n            </Grid>\r\n            <Grid item>\r\n              <Link href=\"/signup\" variant=\"body2\">\r\n                {\"Don't have an account? Sign Up\"}\r\n              </Link>\r\n            </Grid>\r\n          </Grid>\r\n        </Box>\r\n      </Box>\r\n    </Container>\r\n\r\n  );\r\n}","\r\nimport * as React from 'react';\r\nimport Button from '@mui/material/Button';\r\nimport CssBaseline from '@mui/material/CssBaseline';\r\nimport TextField from '@mui/material/TextField';\r\nimport Link from '@mui/material/Link';\r\nimport Grid from '@mui/material/Grid';\r\nimport Box from '@mui/material/Box';\r\nimport Typography from '@mui/material/Typography';\r\nimport Container from '@mui/material/Container';\r\n\r\n// Firebase Code\r\nimport AuthProvider, { AuthContext } from '../context/AuthContext';\r\nimport { db } from '../firebase/firebase'\r\nimport { collection, addDoc } from \"firebase/firestore\";\r\n\r\nimport {\r\n    useHistory,\r\n} from 'react-router-dom';\r\n\r\n// Success/Error Alerts\r\nimport Alert from '@mui/material/Alert';\r\nimport IconButton from '@mui/material/IconButton';\r\nimport Collapse from '@mui/material/Collapse';\r\nimport CloseIcon from '@mui/icons-material/Close';\r\n\r\nexport default function LogIn() {\r\n    const { signup } = React.useContext(AuthContext);\r\n    const history = useHistory();\r\n    const [openError, setOpenError] = React.useState(false);\r\n    const [error, setError] = React.useState(\"\");\r\n\r\n    const findError = (err) => {\r\n       let errorMessage = \"\";\r\n        switch (err.code) {\r\n            case \"auth/weak-password\":\r\n              errorMessage = \"Your password is too weak! We require at least 6 characters.\";\r\n              break;\r\n            case \"auth/email-already-in-use\":\r\n              errorMessage = \"This email is already in use. Please login or use another email.\";\r\n              break;\r\n            default:\r\n              errorMessage = \"An undefined error happened.\";\r\n          }\r\n          return errorMessage;\r\n    }\r\n\r\n\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault();\r\n        const data = new FormData(event.currentTarget);\r\n\r\n        // It returns a Promise\r\n        signup(data.get('email'), data.get('password'), data.get('firstName'), data.get('lastName'))\r\n            .then(user => {\r\n                localStorage.setItem(\"token\", user.user.accessToken);\r\n                \r\n                addDoc(collection(db, \"users\"), {\r\n                    firstName: data.get('firstName'),\r\n                    lastName: data.get('lastName'),\r\n                    uid: user.user.uid,\r\n                    email: user.user.email,\r\n                    markers: []\r\n                })\r\n                    .then(res => {\r\n                        console.log('User added to database')\r\n                        history.push('/map')\r\n                        console.log('Sign Up from Sign Up component')\r\n                        setOpenError(false)\r\n\r\n                    })\r\n                    .catch(err => {\r\n                        console.log('Error with Adding user to db');\r\n\r\n                        setError(findError(err)); //Change later\r\n                        setOpenError(true)\r\n                    })\r\n\r\n\r\n\r\n            }).catch(err => {\r\n                console.log(findError(err));\r\n\r\n                setError(findError(err)); //Change later\r\n                setOpenError(true)\r\n            });\r\n\r\n\r\n\r\n        // eslint-disable-next-line no-console\r\n        console.log({\r\n            firstName: data.get('firstName'),\r\n            lastName: data.get('lastName'),\r\n            email: data.get('email'),\r\n            password: data.get('password'),\r\n        });\r\n\r\n\r\n    };\r\n\r\n    return (\r\n        <Container component=\"main\" maxWidth=\"xs\">\r\n            <CssBaseline />\r\n            <Box\r\n                sx={{\r\n                    marginTop: 8,\r\n                    display: 'flex',\r\n                    flexDirection: 'column',\r\n                    alignItems: 'center',\r\n                }}\r\n            >\r\n\r\n                <Collapse in={openError}>\r\n                    <Alert\r\n                        action={\r\n                            <IconButton\r\n                                aria-label=\"close\"\r\n                                color=\"inherit\"\r\n                                size=\"small\"\r\n                                onClick={() => {\r\n                                    setOpenError(false);\r\n                                }}\r\n                            >\r\n                                <CloseIcon fontSize=\"inherit\" />\r\n                            </IconButton>\r\n                        }\r\n                        sx={{ mb: 2 }}\r\n                        severity=\"error\"\r\n                    >\r\n                        {error}\r\n                    </Alert>\r\n                </Collapse>\r\n\r\n\r\n\r\n\r\n                <Typography component=\"h1\" variant=\"h5\">\r\n                    Sign up\r\n                </Typography>\r\n                <Box component=\"form\" noValidate onSubmit={handleSubmit} sx={{ mt: 3 }}>\r\n                    <Grid container spacing={2}>\r\n                        <Grid item xs={12} sm={6}>\r\n                            <TextField\r\n                                autoComplete=\"given-name\"\r\n                                name=\"firstName\"\r\n                                required\r\n                                fullWidth\r\n                                id=\"firstName\"\r\n                                label=\"First Name\"\r\n                                autoFocus\r\n                            />\r\n                        </Grid>\r\n                        <Grid item xs={12} sm={6}>\r\n                            <TextField\r\n                                required\r\n                                fullWidth\r\n                                id=\"lastName\"\r\n                                label=\"Last Name\"\r\n                                name=\"lastName\"\r\n                                autoComplete=\"family-name\"\r\n                            />\r\n                        </Grid>\r\n                        <Grid item xs={12}>\r\n                            <TextField\r\n                                required\r\n                                fullWidth\r\n                                id=\"email\"\r\n                                label=\"Email Address\"\r\n                                name=\"email\"\r\n                                autoComplete=\"email\"\r\n                            />\r\n                        </Grid>\r\n                        <Grid item xs={12}>\r\n                            <TextField\r\n                                required\r\n                                fullWidth\r\n                                name=\"password\"\r\n                                label=\"Password\"\r\n                                type=\"password\"\r\n                                id=\"password\"\r\n                                autoComplete=\"new-password\"\r\n                            />\r\n                        </Grid>\r\n                       \r\n                    </Grid>\r\n                    <Button\r\n                        type=\"submit\"\r\n                        fullWidth\r\n                        variant=\"contained\"\r\n                        sx={{ mt: 3, mb: 2 }}\r\n                    >\r\n                        Sign Up\r\n                    </Button>\r\n                    <Grid container justifyContent=\"flex-end\">\r\n                        <Grid item>\r\n                            <Link href=\"/login\" variant=\"body2\">\r\n                                Already have an account? Sign in\r\n                            </Link>\r\n                        </Grid>\r\n                    </Grid>\r\n                </Box>\r\n            </Box>\r\n\r\n        </Container>\r\n\r\n\r\n    );\r\n}","import React from \"react\";\nimport FloodMap from \"./map/FloodMap\";\nimport Home from \"./components/Home\";\nimport PrivateRoute from './private-routes/PrivateRoute';\n\n// Sign In\n\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  useHistory,\n} from 'react-router-dom';\n\nimport LogIn from \"./components/LogIn\";\nimport SignUp from \"./components/SignUp\";\n\nconst App = () => {\n  const history = useHistory();\n\n\n  // This is ready to add more components\n  return (<>\n   <Router>\n      <Switch>\n        <Route path='/' exact component={Home} />\n        <Route path='/login' exact component={LogIn} />\n\n        {/** Chanege to Route as anyone can access the map */}\n        <Route path='/map' exact component={FloodMap} />\n        <Route path='/signup' exact component={SignUp} />\n\n      </Switch>\n      </Router>\n\n  </>\n  );\n};\n\nexport default App;\n\n\n// TODO\n/**\n * 1. Don't let the user submit without the required info DONE\n * 2. Setup success/error messages DONE\n * 3. When you click on a post you can see the info stored in it on a popup DONE\n * 4. Firebase authorization and authentication part DONE\n * 5. Navbar to go to user settings menu DONE\n * 6. Divide the code into smaller component files to increase readability DONE\n * 7. Work on efficiency/performance of the markers DONE\n *\n * What is missing?\n * \n * 1. \"Is this event still happening?\" question on the form\n * 2. Ability to filter data in the UI. All in the browser\n * 3. Photos and camera modes (look into this) Amazon S3 maybe?\n * 4. Button that will enable the posting feature\n * \n * 5. You can only edit you own posts\n * \n * \n */","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport AuthProvider from './context/AuthContext';\n\nReactDOM.render(\n  <React.StrictMode>\n    \n     <AuthProvider>\n        <App />\n      </AuthProvider>\n    \n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}